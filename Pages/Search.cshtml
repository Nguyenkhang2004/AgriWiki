@page
@model AgriWiki_Project.Pages.Search
@{
    ViewData["Title"] = "Search";
}
<link rel="stylesheet" href="~/css/search.css">
<div class="container">
    <div class="row">
        <!-- Sidebar - B·ªô l·ªçc -->
        <div class="col-lg-3 col-md-4 mb-4">
            <div class="sidebar">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h5 class="mb-0"><i class="bi bi-funnel me-2"></i>B·ªô l·ªçc</h5>
                    <button class="btn btn-sm btn-link text-danger p-0" onclick="clearAllFilters()">
                        X√≥a t·∫•t c·∫£
                    </button>
                </div>

                <!-- Danh m·ª•c -->
                <div class="filter-section">
                    <div class="filter-title">
                        <i class="bi bi-grid me-1"></i>Danh m·ª•c
                    </div>
                    <div>
                        <div class="filter-option">
                            <input type="checkbox" name="category" value="" id="cat_all" checked
                                onchange="filterPlants()">
                            <label for="cat_all" class="ms-2">T·∫•t c·∫£</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" name="category" value="C√¢y ƒÉn qu·∫£" id="cat_1"
                                onchange="filterPlants()">
                            <label for="cat_1" class="ms-2">C√¢y ƒÉn qu·∫£</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" name="category" value="C√¢y c√¥ng nghi·ªáp" id="cat_2"
                                onchange="filterPlants()">
                            <label for="cat_2" class="ms-2">C√¢y c√¥ng nghi·ªáp</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" name="category" value="C√¢y rau" id="cat_3" onchange="filterPlants()">
                            <label for="cat_3" class="ms-2">C√¢y rau</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" name="category" value="C√¢y c·∫£nh" id="cat_4"
                                onchange="filterPlants()">
                            <label for="cat_4" class="ms-2">C√¢y c·∫£nh</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" name="category" value="C√¢y thu·ªëc" id="cat_5"
                                onchange="filterPlants()">
                            <label for="cat_5" class="ms-2">C√¢y thu·ªëc</label>
                        </div>
                    </div>
                </div>

                <hr>

                <!-- ƒêi·ªÅu ki·ªán √°nh s√°ng -->
                <div class="filter-section">
                    <div class="filter-title">
                        <i class="bi bi-sun me-1"></i>ƒêi·ªÅu ki·ªán √°nh s√°ng
                    </div>
                    <div>
                        <div class="filter-option">
                            <input type="checkbox" name="sunlight" value="" id="sun_all" checked
                                onchange="filterPlants()">
                            <label for="sun_all" class="ms-2">T·∫•t c·∫£</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" name="sunlight" value="√Ånh s√°ng m·∫∑t tr·ªùi ƒë·∫ßy ƒë·ªß" id="sun_1"
                                onchange="filterPlants()">
                            <label for="sun_1" class="ms-2 small">√Ånh s√°ng m·∫∑t tr·ªùi ƒë·∫ßy ƒë·ªß</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" name="sunlight" value="√Ånh s√°ng gi√°n ti·∫øp" id="sun_2"
                                onchange="filterPlants()">
                            <label for="sun_2" class="ms-2 small">√Ånh s√°ng gi√°n ti·∫øp</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" name="sunlight" value="B√≥ng r√¢m" id="sun_3"
                                onchange="filterPlants()">
                            <label for="sun_3" class="ms-2 small">B√≥ng r√¢m</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" name="sunlight" value="√Ånh s√°ng ƒë·∫ßy ƒë·ªß" id="sun_4"
                                onchange="filterPlants()">
                            <label for="sun_4" class="ms-2 small">√Ånh s√°ng ƒë·∫ßy ƒë·ªß</label>
                        </div>
                    </div>
                </div>

                <hr>

                <!-- Lo·∫°i ƒë·∫•t -->
                <div class="filter-section">
                    <div class="filter-title">
                        <i class="bi bi-droplet me-1"></i>Lo·∫°i ƒë·∫•t
                    </div>
                    <div>
                        <div class="filter-option">
                            <input type="checkbox" name="soil" value="" id="soil_all" checked onchange="filterPlants()">
                            <label for="soil_all" class="ms-2">T·∫•t c·∫£</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" name="soil" value="ƒê·∫•t t∆°i x·ªëp" id="soil_1"
                                onchange="filterPlants()">
                            <label for="soil_1" class="ms-2 small">ƒê·∫•t t∆°i x·ªëp</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" name="soil" value="ƒê·∫•t gi√†u dinh d∆∞·ª°ng" id="soil_2"
                                onchange="filterPlants()">
                            <label for="soil_2" class="ms-2 small">ƒê·∫•t gi√†u dinh d∆∞·ª°ng</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" name="soil" value="ƒê·∫•t th·ªãt pha c√°t" id="soil_3"
                                onchange="filterPlants()">
                            <label for="soil_3" class="ms-2 small">ƒê·∫•t th·ªãt pha c√°t</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" name="soil" value="ƒê·∫•t c√°t" id="soil_4" onchange="filterPlants()">
                            <label for="soil_4" class="ms-2 small">ƒê·∫•t c√°t</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-lg-9 col-md-8">
            <!-- Search Box -->
            <div class="search-box p-3">
                <div class="position-relative">
                    <i class="bi bi-search search-icon"></i>
                    <input type="text" class="form-control search-input" id="searchInput"
                        placeholder="T√¨m ki·∫øm theo t√™n c√¢y ho·∫∑c t√™n khoa h·ªçc..." oninput="filterPlants()">
                </div>
            </div>

            <!-- Results Count -->
            <div class="mb-3">
                <p class="text-muted">
                    T√¨m th·∫•y <span class="fw-bold text-success" id="resultsCount">6</span> k·∫øt qu·∫£
                </p>
            </div>

            <!-- Results Grid -->
            <div class="row g-4" id="plantsGrid">
                <!-- C√† chua -->
                <div class="col-lg-4 col-md-6 plant-item" data-category="C√¢y rau"
                    data-sunlight="√Ånh s√°ng m·∫∑t tr·ªùi ƒë·∫ßy ƒë·ªß" data-soil="ƒê·∫•t t∆°i x·ªëp" data-name="c√† chua"
                    data-scientific="solanum lycopersicum" data-tooltip="ƒê√¢y l√† tooltip ƒë·ªông cho c√¢y üå±">
                    <div class="plant-card" data-tooltip="ƒê√¢y l√† tooltip ƒë·ªông cho c√¢y üå±">
                        <img src="https://images.unsplash.com/photo-1592924357228-91a4daadcfea?w=400" alt="C√† chua"
                            class="plant-image" data-tooltip="ƒê√¢y l√† tooltip ƒë·ªông cho c√¢y üå±">
                        <div class="p-3">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <h5 class="mb-0">C√† chua</h5>
                                <span class="plant-category">C√¢y rau</span>
                            </div>
                            <p class="small text-muted fst-italic mb-2">Solanum lycopersicum</p>
                        </div>
                    </div>
                </div>

                <!-- Hoa h·ªìng -->
                <div class="col-lg-4 col-md-6 plant-item" data-category="C√¢y c·∫£nh" data-sunlight="√Ånh s√°ng gi√°n ti·∫øp"
                    data-soil="ƒê·∫•t gi√†u dinh d∆∞·ª°ng" data-name="hoa h·ªìng" data-scientific="rosa">
                    <div class="plant-card" data-tooltip="ƒê√¢y l√† tooltip ƒë·ªông cho c√¢y üå±">
                        <img src="https://images.unsplash.com/photo-1518709268805-4e9042af9f23?w=400" alt="Hoa h·ªìng"
                            class="plant-image">
                        <div class="p-3">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <h5 class="mb-0">Hoa h·ªìng</h5>
                                <span class="plant-category">C√¢y c·∫£nh</span>
                            </div>
                            <p class="small text-muted fst-italic mb-2">Rosa</p>
                        </div>
                    </div>
                </div>

                <!-- Xo√†i -->
                <div class="col-lg-4 col-md-6 plant-item" data-category="C√¢y ƒÉn qu·∫£"
                    data-sunlight="√Ånh s√°ng m·∫∑t tr·ªùi ƒë·∫ßy ƒë·ªß" data-soil="ƒê·∫•t th·ªãt pha c√°t" data-name="xo√†i"
                    data-scientific="mangifera indica">
                    <div class="plant-card" data-tooltip="ƒê√¢y l√† tooltip ƒë·ªông cho c√¢y üå±">
                        <img src="https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?w=400" alt="Xo√†i"
                            class="plant-image">
                        <div class="p-3">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <h5 class="mb-0">Xo√†i</h5>
                                <span class="plant-category">C√¢y ƒÉn qu·∫£</span>
                            </div>
                            <p class="small text-muted fst-italic mb-2">Mangifera indica</p>
                        </div>
                    </div>
                </div>

                <!-- H√∫ng qu·∫ø -->
                <div class="col-lg-4 col-md-6 plant-item" data-category="C√¢y thu·ªëc" data-sunlight="√Ånh s√°ng ƒë·∫ßy ƒë·ªß"
                    data-soil="ƒê·∫•t t∆°i x·ªëp" data-name="h√∫ng qu·∫ø" data-scientific="ocimum basilicum">
                    <div class="plant-card" data-tooltip="ƒê√¢y l√† tooltip ƒë·ªông cho c√¢y üå±">
                        <img src="https://images.unsplash.com/photo-1618375569909-3c8616cf7733?w=400" alt="H√∫ng qu·∫ø"
                            class="plant-image">
                        <div class="p-3">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <h5 class="mb-0">H√∫ng qu·∫ø</h5>
                                <span class="plant-category">C√¢y thu·ªëc</span>
                            </div>
                            <p class="small text-muted fst-italic mb-2">Ocimum basilicum</p>

                        </div>
                    </div>
                </div>

                <!-- C√† ph√™ -->
                <div class="col-lg-4 col-md-6 plant-item" data-category="C√¢y c√¥ng nghi·ªáp" data-sunlight="B√≥ng r√¢m"
                    data-soil="ƒê·∫•t c√°t" data-name="c√† ph√™" data-scientific="coffea arabica">
                    <div class="plant-card" data-tooltip="ƒê√¢y l√† tooltip ƒë·ªông cho c√¢y üå±">
                        <img src="https://images.unsplash.com/photo-1559056199-641a0ac8b55e?w=400" alt="C√† ph√™"
                            class="plant-image">
                        <div class="p-3">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <h5 class="mb-0">C√† ph√™</h5>
                                <span class="plant-category">C√¢y c√¥ng nghi·ªáp</span>
                            </div>
                            <p class="small text-muted fst-italic mb-2">Coffea arabica</p>

                        </div>
                    </div>
                </div>

                <!-- D·ª´a -->
                <div class="col-lg-4 col-md-6 plant-item" data-category="C√¢y c√¥ng nghi·ªáp"
                    data-sunlight="√Ånh s√°ng m·∫∑t tr·ªùi ƒë·∫ßy ƒë·ªß" data-soil="ƒê·∫•t c√°t" data-name="d·ª´a"
                    data-scientific="cocos nucifera">
                    <div class="plant-card" data-tooltip="ƒê√¢y l√† tooltip ƒë·ªông cho c√¢y üå±">
                        <img src="https://images.unsplash.com/photo-1598449356475-b9f71db7d847?w=400" alt="D·ª´a"
                            class="plant-image">
                        <div class="p-3">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <h5 class="mb-0">D·ª´a</h5>
                                <span class="plant-category">C√¢y c√¥ng nghi·ªáp</span>
                            </div>
                            <p class="small text-muted fst-italic mb-2">Cocos nucifera</p>

                        </div>
                    </div>
                </div>
            </div>

            <!-- No Results -->
            <div class="no-results" id="noResults">
                <i class="bi bi-search" style="font-size: 4rem; color: #ccc;"></i>
                <h4 class="mt-3">Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£</h4>
                <p class="text-muted">Th·ª≠ ƒëi·ªÅu ch·ªânh b·ªô l·ªçc ho·∫∑c t·ª´ kh√≥a t√¨m ki·∫øm c·ªßa b·∫°n</p>
                <button class="btn btn-success" onclick="clearAllFilters()">
                    X√≥a b·ªô l·ªçc
                </button>
            </div>
        </div>
    </div>
</div>

<script>
    function filterPlants() {
        const searchValue = document.getElementById('searchInput').value.toLowerCase();
        const categoryValue = document.querySelector('input[name="category"]:checked').value;
        const sunlightValue = document.querySelector('input[name="sunlight"]:checked').value;
        const soilValue = document.querySelector('input[name="soil"]:checked').value;

        const plantItems = document.querySelectorAll('.plant-item');
        let visibleCount = 0;

        plantItems.forEach(item => {
            const name = item.dataset.name;
            const scientific = item.dataset.scientific;
            const category = item.dataset.category;
            const sunlight = item.dataset.sunlight;
            const soil = item.dataset.soil;

            const matchSearch = !searchValue || name.includes(searchValue) || scientific.includes(searchValue);
            const matchCategory = !categoryValue || category === categoryValue;
            const matchSunlight = !sunlightValue || sunlight === sunlightValue;
            const matchSoil = !soilValue || soil === soilValue;

            if (matchSearch && matchCategory && matchSunlight && matchSoil) {
                item.style.display = '';
                visibleCount++;
            } else {
                item.style.display = 'none';
            }
        });

        document.getElementById('resultsCount').textContent = visibleCount;

        const noResults = document.getElementById('noResults');
        const grid = document.getElementById('plantsGrid');
        if (visibleCount === 0) {
            noResults.style.display = 'block';
            grid.style.display = 'none';
        } else {
            noResults.style.display = 'none';
            grid.style.display = '';
        }
    }

    function clearAllFilters() {
        document.getElementById('searchInput').value = '';
        document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            if (checkbox.value === '') checkbox.checked = true;
        });
        filterPlants();
    }

</script>