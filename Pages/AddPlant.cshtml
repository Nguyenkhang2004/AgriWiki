@page
@model AgriWiki_Project.Pages.AddPlant
@{
    ViewData["Title"] = "AddPlant";
}


<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\
    <link rel="stylesheet" href="~/css/addplantstyle.css">
    <title>AgriWiki - Qu·∫£n l√Ω C√¢y Tr·ªìng</title>
</head>

<body>
    <div class="header">
        <h1>üå± AgriWiki - Qu·∫£n l√Ω C√¢y Tr·ªìng</h1>
        <p>H·ªá th·ªëng qu·∫£n l√Ω th√¥ng tin c√¢y tr·ªìng cho admin</p>
    </div>

    <div class="container">
        <form id="plantForm">
            <!-- Th√¥ng tin c∆° b·∫£n -->
            <div class="card">
                <h2 class="section-title">üìù Th√¥ng tin c∆° b·∫£n</h2>

                <div class="form-row">
                    <div class="form-group">
                        <label for="plantName">T√™n c√¢y tr·ªìng *</label>
                        <input type="text" id="plantName" name="plantName" required>
                    </div>
                    <div class="form-group">
                        <label for="scientificName">T√™n khoa h·ªçc</label>
                        <input type="text" id="scientificName" name="scientificName">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="category">Danh m·ª•c *</label>
                        <select id="category" name="category" required>
                            <option value="">-- Ch·ªçn danh m·ª•c --</option>
                            <option value="1">Rau ƒÉn l√°</option>
                            <option value="2">C√¢y ƒÉn qu·∫£</option>
                            <option value="3">D∆∞·ª£c li·ªáu</option>
                            <option value="4">Hoa c·∫£nh</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="imageUrl">URL h√¨nh ·∫£nh</label>
                        <input type="url" id="imageUrl" name="imageUrl" onchange="previewImage()">
                    </div>
                </div>

                <div class="form-row single">
                    <div class="form-group">
                        <label for="description">M√¥ t·∫£ chi ti·∫øt</label>
                        <textarea id="description" name="description" rows="4"
                            placeholder="Nh·∫≠p m√¥ t·∫£ chi ti·∫øt v·ªÅ c√¢y tr·ªìng..."></textarea>
                    </div>
                </div>

                <div id="imagePreview" style="display: none;">
                    <img id="previewImg" class="image-preview" alt="Preview">
                </div>
            </div>

            <!-- ƒêi·ªÅu ki·ªán sinh tr∆∞·ªüng -->
            <div class="card">
                <h2 class="section-title">üå°Ô∏è ƒêi·ªÅu ki·ªán sinh tr∆∞·ªüng</h2>

                <div class="growth-conditions-grid">
                    <div class="form-group">
                        <label for="temperature">Nhi·ªát ƒë·ªô</label>
                        <input type="text" id="temperature" name="temperature" placeholder="VD: 20-30¬∞C">
                    </div>
                    <div class="form-group">
                        <label for="humidity">ƒê·ªô ·∫©m</label>
                        <input type="text" id="humidity" name="humidity" placeholder="VD: 60-80%">
                    </div>
                    <div class="form-group">
                        <label for="soilType">Lo·∫°i ƒë·∫•t</label>
                        <input type="text" id="soilType" name="soilType" placeholder="VD: ƒê·∫•t th·ªãt pha c√°t">
                    </div>
                    <div class="form-group">
                        <label for="sunlight">√Ånh s√°ng</label>
                        <input type="text" id="sunlight" name="sunlight" placeholder="VD: √Ånh s√°ng tr·ª±c ti·∫øp 6-8h/ng√†y">
                    </div>
                </div>

                <div class="form-row single">
                    <div class="form-group">
                        <label for="watering">T∆∞·ªõi n∆∞·ªõc</label>
                        <textarea id="watering" name="watering" rows="3"
                            placeholder="H∆∞·ªõng d·∫´n t∆∞·ªõi n∆∞·ªõc chi ti·∫øt..."></textarea>
                    </div>
                </div>
            </div>

            <!-- B·ªánh h·∫°i -->
            <div class="card">
                <h2 class="section-title">ü¶† B·ªánh h·∫°i</h2>

                <div class="multi-select-container">
                    <div class="multi-select-item">
                        <input type="checkbox" id="disease1" name="diseases" value="1">
                        <label for="disease1">B·ªánh th·ªëi r·ªÖ - G√¢y ra b·ªüi n·∫•m, l√†m r·ªÖ c√¢y th·ªëi nh≈©n</label>
                    </div>
                    <div class="multi-select-item">
                        <input type="checkbox" id="disease2" name="diseases" value="2">
                        <label for="disease2">B·ªánh ƒë·ªëm l√° - Xu·∫•t hi·ªán c√°c ƒë·ªëm n√¢u tr√™n l√°</label>
                    </div>
                    <div class="multi-select-item">
                        <input type="checkbox" id="disease3" name="diseases" value="3">
                        <label for="disease3">B·ªánh h√©o v√†ng - L√° c√¢y h√©o v√†ng v√† r·ª•ng</label>
                    </div>
                </div>

                <div class="add-new-section">
                    <button type="button" class="btn btn-secondary" onclick="toggleAddDisease()">
                        ‚ûï Th√™m b·ªánh h·∫°i m·ªõi
                    </button>
                    <div id="addDiseaseForm" class="add-new-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="newDiseaseName">T√™n b·ªánh</label>
                                <input type="text" id="newDiseaseName">
                            </div>
                            <div class="form-group">
                                <label for="newDiseaseDesc">M√¥ t·∫£</label>
                                <input type="text" id="newDiseaseDesc">
                            </div>
                        </div>
                        <div class="form-row single">
                            <div class="form-group">
                                <label for="newDiseasePrevention">Ph∆∞∆°ng ph√°p ph√≤ng ch·ªëng</label>
                                <textarea id="newDiseasePrevention" rows="3"></textarea>
                            </div>
                        </div>
                        <button type="button" class="btn btn-primary" onclick="addDisease()">Th√™m</button>
                        <button type="button" class="btn btn-secondary" onclick="toggleAddDisease()">H·ªßy</button>
                    </div>
                </div>
            </div>

            <!-- S√¢u h·∫°i -->
            <div class="card">
                <h2 class="section-title">üêõ S√¢u h·∫°i</h2>

                <div class="multi-select-container">
                    <div class="multi-select-item">
                        <input type="checkbox" id="pest1" name="pests" value="1">
                        <label for="pest1">R·∫ßy xanh - H√∫t nh·ª±a c√¢y, l√†m l√° v√†ng √∫a</label>
                    </div>
                    <div class="multi-select-item">
                        <input type="checkbox" id="pest2" name="pests" value="2">
                        <label for="pest2">S√¢u cu·ªën l√° - ƒÇn l√° non, cu·ªën l√° l·∫°i</label>
                    </div>
                    <div class="multi-select-item">
                        <input type="checkbox" id="pest3" name="pests" value="3">
                        <label for="pest3">Tuy·∫øn tr√πng - G√¢y s∆∞ng r·ªÖ, c·∫£n tr·ªü h·∫•p thu</label>
                    </div>
                </div>

                <div class="add-new-section">
                    <button type="button" class="btn btn-secondary" onclick="toggleAddPest()">
                        ‚ûï Th√™m s√¢u h·∫°i m·ªõi
                    </button>
                    <div id="addPestForm" class="add-new-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="newPestName">T√™n s√¢u h·∫°i</label>
                                <input type="text" id="newPestName">
                            </div>
                            <div class="form-group">
                                <label for="newPestDesc">M√¥ t·∫£</label>
                                <input type="text" id="newPestDesc">
                            </div>
                        </div>
                        <div class="form-row single">
                            <div class="form-group">
                                <label for="newPestControl">Ph∆∞∆°ng ph√°p ki·ªÉm so√°t</label>
                                <textarea id="newPestControl" rows="3"></textarea>
                            </div>
                        </div>
                        <button type="button" class="btn btn-primary" onclick="addPest()">Th√™m</button>
                        <button type="button" class="btn btn-secondary" onclick="toggleAddPest()">H·ªßy</button>
                    </div>
                </div>
            </div>

            <!-- C√¥ng d·ª•ng -->
            <div class="card">
                <h2 class="section-title">üíä C√¥ng d·ª•ng</h2>

                <div class="multi-select-container">
                    <div class="multi-select-item">
                        <input type="checkbox" id="use1" name="uses" value="1">
                        <label for="use1">Th·ª±c ph·∫©m - Cung c·∫•p dinh d∆∞·ª°ng cho c∆° th·ªÉ</label>
                    </div>
                    <div class="multi-select-item">
                        <input type="checkbox" id="use2" name="uses" value="2">
                        <label for="use2">D∆∞·ª£c li·ªáu - C√≥ t√°c d·ª•ng ch·ªØa b·ªánh</label>
                    </div>
                    <div class="multi-select-item">
                        <input type="checkbox" id="use3" name="uses" value="3">
                        <label for="use3">Trang tr√≠ - L√†m ƒë·∫πp kh√¥ng gian s·ªëng</label>
                    </div>
                    <div class="multi-select-item">
                        <input type="checkbox" id="use4" name="uses" value="4">
                        <label for="use4">C√¥ng nghi·ªáp - Nguy√™n li·ªáu s·∫£n xu·∫•t</label>
                    </div>
                </div>

                <div class="add-new-section">
                    <button type="button" class="btn btn-secondary" onclick="toggleAddUse()">
                        ‚ûï Th√™m c√¥ng d·ª•ng m·ªõi
                    </button>
                    <div id="addUseForm" class="add-new-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="newUseName">T√™n c√¥ng d·ª•ng</label>
                                <input type="text" id="newUseName">
                            </div>
                        </div>
                        <div class="form-row single">
                            <div class="form-group">
                                <label for="newUseDesc">M√¥ t·∫£ c√¥ng d·ª•ng</label>
                                <textarea id="newUseDesc" rows="3"></textarea>
                            </div>
                        </div>
                        <button type="button" class="btn btn-primary" onclick="addUse()">Th√™m</button>
                        <button type="button" class="btn btn-secondary" onclick="toggleAddUse()">H·ªßy</button>
                    </div>
                </div>
            </div>

            <!-- N√∫t h√†nh ƒë·ªông -->
            <div class="form-actions">
                <button type="button" class="btn btn-secondary">üö´ H·ªßy</button>
                <button type="button" class="btn btn-danger">üóëÔ∏è X√≥a c√¢y tr·ªìng</button>
                <button type="submit" class="btn btn-primary">üíæ L∆∞u th√¥ng tin</button>
            </div>
        </form>
    </div>

    <script>
        // Preview image function
        function previewImage() {
            const imageUrl = document.getElementById('imageUrl').value;
            const preview = document.getElementById('imagePreview');
            const previewImg = document.getElementById('previewImg');

            if (imageUrl) {
                previewImg.src = imageUrl;
                preview.style.display = 'block';
            } else {
                preview.style.display = 'none';
            }
        }

        // Toggle add disease form
        function toggleAddDisease() {
            const form = document.getElementById('addDiseaseForm');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
        }

        // Add new disease
        function addDisease() {
            const name = document.getElementById('newDiseaseName').value;
            const desc = document.getElementById('newDiseaseDesc').value;
            const prevention = document.getElementById('newDiseasePrevention').value;

            if (name && desc) {
                const container = document.querySelector('#addDiseaseForm').closest('.card').querySelector('.multi-select-container');
                const newId = 'disease' + Date.now();
                const newItem = document.createElement('div');
                newItem.className = 'multi-select-item';
                newItem.innerHTML = `
                    <input type="checkbox" id="${newId}" name="diseases" value="${newId}" checked>
                    <label for="${newId}">${name} - ${desc}</label>
                `;
                container.appendChild(newItem);

                // Clear form
                document.getElementById('newDiseaseName').value = '';
                document.getElementById('newDiseaseDesc').value = '';
                document.getElementById('newDiseasePrevention').value = '';
                toggleAddDisease();

                alert('ƒê√£ th√™m b·ªánh h·∫°i m·ªõi th√†nh c√¥ng!');
            } else {
                alert('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin!');
            }
        }

        // Toggle add pest form
        function toggleAddPest() {
            const form = document.getElementById('addPestForm');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
        }

        // Add new pest
        function addPest() {
            const name = document.getElementById('newPestName').value;
            const desc = document.getElementById('newPestDesc').value;
            const control = document.getElementById('newPestControl').value;

            if (name && desc) {
                const container = document.querySelector('#addPestForm').closest('.card').querySelector('.multi-select-container');
                const newId = 'pest' + Date.now();
                const newItem = document.createElement('div');
                newItem.className = 'multi-select-item';
                newItem.innerHTML = `
                    <input type="checkbox" id="${newId}" name="pests" value="${newId}" checked>
                    <label for="${newId}">${name} - ${desc}</label>
                `;
                container.appendChild(newItem);

                // Clear form
                document.getElementById('newPestName').value = '';
                document.getElementById('newPestDesc').value = '';
                document.getElementById('newPestControl').value = '';
                toggleAddPest();

                alert('ƒê√£ th√™m s√¢u h·∫°i m·ªõi th√†nh c√¥ng!');
            } else {
                alert('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin!');
            }
        }

        // Toggle add use form
        function toggleAddUse() {
            const form = document.getElementById('addUseForm');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
        }

        // Add new use
        function addUse() {
            const name = document.getElementById('newUseName').value;
            const desc = document.getElementById('newUseDesc').value;

            if (name && desc) {
                const container = document.querySelector('#addUseForm').closest('.card').querySelector('.multi-select-container');
                const newId = 'use' + Date.now();
                const newItem = document.createElement('div');
                newItem.className = 'multi-select-item';
                newItem.innerHTML = `
                    <input type="checkbox" id="${newId}" name="uses" value="${newId}" checked>
                    <label for="${newId}">${name} - ${desc}</label>
                `;
                container.appendChild(newItem);

                // Clear form
                document.getElementById('newUseName').value = '';
                document.getElementById('newUseDesc').value = '';
                toggleAddUse();

                alert('ƒê√£ th√™m c√¥ng d·ª•ng m·ªõi th√†nh c√¥ng!');
            } else {
                alert('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin!');
            }
        }

        // Form submission handler
        document.getElementById('plantForm').addEventListener('submit', function (e) {
            e.preventDefault();

            // Collect form data
            const formData = {
                name: document.getElementById('plantName').value,
                scientificName: document.getElementById('scientificName').value,
                category: document.getElementById('category').value,
                description: document.getElementById('description').value,
                imageUrl: document.getElementById('imageUrl').value,
                growthConditions: {
                    temperature: document.getElementById('temperature').value,
                    humidity: document.getElementById('humidity').value,
                    soilType: document.getElementById('soilType').value,
                    sunlight: document.getElementById('sunlight').value,
                    watering: document.getElementById('watering').value
                },
                diseases: Array.from(document.querySelectorAll('input[name="diseases"]:checked')).map(cb => cb.value),
                pests: Array.from(document.querySelectorAll('input[name="pests"]:checked')).map(cb => cb.value),
                uses: Array.from(document.querySelectorAll('input[name="uses"]:checked')).map(cb => cb.value)
            };

            console.log('Plant data:', formData);
            alert('Th√¥ng tin c√¢y tr·ªìng ƒë√£ ƒë∆∞·ª£c l∆∞u th√†nh c√¥ng!\n\nD·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c ghi v√†o console ƒë·ªÉ ki·ªÉm tra.');
        });

        // Demo data for editing mode
        function loadDemoData() {
            document.getElementById('plantName').value = 'C√† chua';
            document.getElementById('scientificName').value = 'Solanum lycopersicum';
            document.getElementById('category').value = '2';
            document.getElementById('description').value = 'C√† chua l√† lo·∫°i qu·∫£ c√≥ m√†u ƒë·ªè, gi√†u vitamin C v√† lycopene, th∆∞·ªùng ƒë∆∞·ª£c s·ª≠ d·ª•ng trong n·∫•u ƒÉn v√† l√†m salad.';
            document.getElementById('imageUrl').value = 'https://images.unsplash.com/photo-1546470427-227211c0b77b?ixlib=rb-4.0.3&w=400';
            document.getElementById('temperature').value = '18-25¬∞C';
            document.getElementById('humidity').value = '65-75%';
            document.getElementById('soilType').value = 'ƒê·∫•t th·ªãt pha c√°t, t∆°i x·ªëp';
            document.getElementById('sunlight').value = '√Ånh s√°ng tr·ª±c ti·∫øp 6-8 gi·ªù/ng√†y';
            document.getElementById('watering').value = 'T∆∞·ªõi ƒë·ªÅu ƒë·∫∑n, gi·ªØ ƒë·ªô ·∫©m ƒë·∫•t kho·∫£ng 70-80%. Tr√°nh t∆∞·ªõi ng·∫≠p √∫ng.';

            // Select some diseases, pests, and uses
            document.getElementById('disease2').checked = true;
            document.getElementById('pest1').checked = true;
            document.getElementById('use1').checked = true;

            previewImage();
        }

        // Load demo data when page loads
        window.addEventListener('load', function () {
            setTimeout(loadDemoData, 1000);
        });
    </script>
</body>

</html>